name: Wopslang CI

on:
  push:
    branches: [ main, lab ]
  pull_request:
    branches: [ main, lab ]

jobs:
  Ubuntu:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: make
      run: bash build.sh; mv Wopslang test/; mv lib/library.so test/lib/library.so;
    - name: run
      run: cd test; cat in | ./Wopslang ci-test.wops debug
    - name: clear
      run: rm test/Wopslang
